<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Events</title>
    <meta name="viewport" content="width=device-width">
<body>
    <h3>Events</h3>

    <!--<div onclick="alert(name)">some ele</div>-->
    <section id="box">
        <div id="ele1">some elem1</div>
        <div id="ele2">some elem2</div>
        <div id="ele3">some elem3</div>
    </section>
    <script>
        
        /*
        * DOM事件流：
        *   1、“DOM2级事件”规范明确要求捕获阶段不会涉及事件目标，但是大多浏览器都会在捕获阶段触发目标对象上的事件，因此，会有两次机会在目标对象上触发事件；
        *
        * 事件处理程序：
        *   1、HTML事件处理程序：
        *       1)这种情况下绑定的监听器，他能够扩展自己的作用域，进而有权访问全局作用域的属性，如eg.1;
        *   2、DOM0级事件处理程序：
        *       1)事件处理程序的作用域会被绑定到当前元素上；
        *       2)事件处理程序会在事件流的冒泡阶段被处理；
        *   3、DOM2级事件处理程序：
        *       1)与DOM0相比，好处是可以为元素绑定多个事件处理程序；
        *       2)通过addEventListener添加的匿名函数将无法移除；
        *
        * 事件对象：
        *   0、event对象会在事件处理程序执行期间存在，一旦程序执行完，event对象就会被销毁；
        *   1、currentTarget:监听器当前正在处理事件的元素，也即事件被注册的元素；
        *   2、target事件的目标，如click，他指的是真正点击的那个元素；
        *   3、this始终与currentTarget指向同一个对象；
        *   4、eventPhase ： 1 -> 捕获阶段、2 -> 处于目标对象上、3 -> 冒泡阶段；
        *
        * 事件类型：
        *   1、UI事件：
        *       1)、DOM2级事件规范，应该在document而非window上触发load事件，但目前所有的浏览器均已在window上实现了改事件；
        *
        *
        * 内存和性能：
        *
        *
        *
        * */
        
//        eg.1
//        function () {
//        扩展作用域的方式
//            with(document) {
//                with (this) {
//                    code here
//                }
//            }
//        }
        var name = "Judy";

        
//        eg.2
        var divEle = document.getElementById("ele1");
        divEle.onclick = function () {
            alert(this)
        };
//        会将上边绑定的监听器覆盖掉
        divEle.onclick = function (event) {
//            倘若是自动触发该click事件，则event为undefined
//            alert("this : " + event.bubbles);
            console.log("this1 " + this);
        };
//        触发该监听器
        divEle.onclick();
//        解绑该监听器
        divEle.onclick = null;
        
        
//        eg.3
        var divEle2 = document.getElementById("ele2");
        var handler = function () {
//            event.stopPropagation();
            console.log("1、this : " + this, "\n event.currentTarget : " + event.currentTarget, "\n event.target : " + event.target);
        };
        divEle2.addEventListener("click", handler);
//        divEle2.removeEventListener("click", handler);
        
        var parEle = document.getElementById("box");
        parEle.addEventListener("click", function () {
            console.log("2、event.eventPhase : " + event.eventPhase);
            console.log("2、this : " + this, "\n event.currentTarget : " + event.currentTarget, "\n event.target : " + event.target);
        });
        
//        eg.4
        window.onload = function () {
            console.log("loaded!")
        }
        
        
        
        
    </script>
</body>
</html>